apiVersion: triliovault.trilio.io/v1
kind: BackupPlan
metadata:
  name: sample-application-custom-operator
spec:
  backupConfig:
    target:
      name: sample-target
    retentionPolicy:
      name: sample-policy
  backupPlanComponents:
    custom:
      - matchLabels:
          triliobackupall: all
    operators:
      - operatorId: UNIQUE_ID-mysql-operator
        customResources:
          - groupVersionKind:
              group: "mysql.presslabs.org"
              version: "v1alpha1"
              kind: "MysqlCluster"
            objects:
              - UNIQUE_ID-sample-mysqlcluster
          - groupVersionKind:
              group: "mysql.presslabs.org"
              version: "v1alpha1"
              kind: "MysqlBackup"
        operatorResourceSelector:
          - matchLabels:
              app: mysql-operator
              release: UNIQUE_ID-mysql-operator
        applicationResourceSelector:
          - matchLabels:
              app.kubernetes.io/managed-by: mysql.presslabs.org
              app.kubernetes.io/name: mysql
#        app: my-ss-nginx
#  hooks:
#    - hookAction:
#        name: sample-hookaction
#      matchPatterns:
#        - podRegexPattern: "TestOnePodRegex"
#          containerRegexPattern: "TestOneContainerReges"
